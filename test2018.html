
<!DOCTYPE html>
<html lang="en">
<head profile="http://www.w3.org/2005/10/profile">
	<base href="http://xiper.net">
	<title>  Фиксированный блок с изменяющимся отступом сверху</title>
	<link rel="icon" type="image/png" href="http://xiper.net/wp-content/themes/firsttheme/img/favicon.png">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="Keywords"
					  content="Фиксированный блок с изменяющимся отступом сверху">
	<meta name="Description"
					  content="Фиксированный блок с изменяющимся отступом сверху">
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">

			<link rel="stylesheet" type="text/css" href="http://xiper.net/wp-content/themes/firsttheme/css/main-2.css">
		<link rel="stylesheet" type="text/css" href="http://xiper.net/wp-content/themes/firsttheme/css/html-1.5.css">
		<link rel="stylesheet" type="text/css" href="http://xiper.net/wp-content/themes/firsttheme/css/css-2.3.css">
		<link rel="stylesheet" type="text/css" href="http://xiper.net/wp-content/themes/firsttheme/css/terms-1.1.css">
		<link rel="stylesheet" type="text/css" href="http://xiper.net/wp-content/themes/firsttheme/css/feedback-1.1.css">
	
	<!--[if IE 7]>-->
	<link rel="stylesheet" type="text/css" href="http://xiper.net/wp-content/themes/firsttheme/css/ie7-2.css">
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
	<script type="text/javascript" src="http://xiper.net/wp-content/themes/firsttheme/js/main-1.7.js" charset="utf-8"></script>
	<script type="text/javascript" src="http://xiper.net/wp-content/themes/firsttheme/js/html-min.js" charset="utf-8"></script>
	<script type="text/javascript" src="http://xiper.net/wp-content/themes/firsttheme/js/css-min-1.3.js" charset="utf-8"></script>
	<script type="text/javascript" src="http://xiper.net/wp-content/themes/firsttheme/js/swfobject.js" charset="utf-8"></script>
	<link rel="alternate" type="application/rss+xml" title="http://xiper.net - основы и секреты front-end разработки";
		  href="http://http://xiper.net/rss">
</head>
<!--main wrap-->
<div class="mainWrap">
	<div class="header">
		<a href="/" title="на главную" class="headerLogo"><img src="http://xiper.net/wp-content/themes/firsttheme/img/header/logo.png"
															   alt="xiper.net - основы и секреты front-end разработки"
															   width="297" height="62"></a>

		<ul id="menu-menu-1" class="main-navigation"><li id="menu-item-39" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-39"><a href="http://xiper.net/">Главная</a></li>
<li id="menu-item-111" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-111"><a href="http://xiper.net/collect">Собираем</a>
<ul  class="sub-menu">
	<li id="menu-item-116" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-116"><a href="http://xiper.net/collect/html-and-css-tricks">HTML и CSS приемы</a></li>
	<li id="menu-item-130" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-130"><a href="http://xiper.net/collect/web-without-flash">Веб без flash</a></li>
	<li id="menu-item-129" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-129"><a href="http://xiper.net/collect/weekdays-front-end-dev">Будни front end разработчика</a></li>
	<li id="menu-item-118" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-118"><a href="http://xiper.net/collect/js-plugins">Javascript: решения и плагины</a></li>
	<li id="menu-item-131" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-131"><a href="http://xiper.net/collect/server">Настройки сервера</a></li>
	<li id="menu-item-132" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-132"><a href="http://xiper.net/collect/services">Сервисы</a></li>
</ul>
</li>
<li id="menu-item-119" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-119"><a href="http://xiper.net/watch">Следим</a>
<ul  class="sub-menu">
	<li id="menu-item-120" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-120"><a href="http://xiper.net/watch/webstatistic">Веб статистика за текущий месяц</a></li>
	<li id="menu-item-122" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-122"><a href="http://xiper.net/watch/news">Куда веб катится</a></li>
	<li id="menu-item-121" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-121"><a href="http://xiper.net/watch/xiper-news">Куда Xiper катится</a></li>
</ul>
</li>
<li id="menu-item-123" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-123"><a href="http://xiper.net/uncensored">Без цензуры</a></li>
<li id="menu-item-127" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-127"><a href="http://xiper.net/learn">Учимся</a>
<ul  class="sub-menu">
	<li id="menu-item-1917" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1917"><a href="http://xiper.net/learn/photoshop">Photoshop для кодера</a></li>
	<li id="menu-item-137" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-137"><a href="http://xiper.net/learn/css">Уроки CSS</a></li>
	<li id="menu-item-138" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-138"><a href="http://xiper.net/learn/html">Уроки HTML</a></li>
	<li id="menu-item-1916" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1916"><a href="http://xiper.net/learn/javascript">Уроки Javascript</a></li>
	<li id="menu-item-139" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-139"><a href="http://xiper.net/learn/lessons-jquery">Уроки jQuery</a></li>
	<li id="menu-item-135" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-135"><a href="http://xiper.net/learn/tegofenshuj">Тегофеншуй</a></li>
	<li id="menu-item-136" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-136"><a href="http://xiper.net/learn/also-need-to-know">Тоже нужно знать</a></li>
	<li id="menu-item-140" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-140"><a href="http://xiper.net/learn/svg">Уроки SVG</a></li>
	<li id="menu-item-141" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-141"><a href="http://xiper.net/learn/uroki-webgl">Уроки WebGL</a></li>
	<li id="menu-item-1915" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1915"><a href="http://xiper.net/learn/bonus-books">Бонус книги</a></li>
</ul>
</li>
<li id="menu-item-133" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-133"><a href="http://xiper.net/manuals">Справочники</a>
<ul  class="sub-menu">
	<li id="menu-item-145" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-145"><a href="http://xiper.net/manuals/html">HTML справочник</a></li>
	<li id="menu-item-143" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-143"><a href="http://xiper.net/manuals/css">CSS справочник</a></li>
	<li id="menu-item-144" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-144"><a href="http://xiper.net/manuals/terms">Cловарь терминов</a></li>
	<li id="menu-item-146" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-146"><a href="http://xiper.net/manuals/canvas">Справочник HTML5 Canvas</a></li>
</ul>
</li>
</ul>		<!--<form action="search.html" method="get">
        <div><input type="text" name="s" value="я ищу&hellip;" /><input type="submit" value="найти" /> </div>
        </form>-->

		<div class="headerSubscription">
			<a href="http://twitter.com/xiper_news/" class="headerTwitter" title="наши новости и мысли на twitter"
			   rel="nofollow">twitter</a>
			<a href="http://xiper.net/rss" class="headerSubscriptionRSS" title="подписаться на RSS">RSS</a>
			<a href="http://xiper.net/subscription" class="headerSubscriptionEmail"
			   title="подписаться на e-mail рассылку">e-mail</a>
		</div>

	</div>
	<div class="topPanel">
		<div style="width:728px; height:90px; margin: 0 auto">
		</div>

	</div>

    <div class="contentWrap">
        <div class="content">
            <h1>Фиксированный блок с изменяющимся отступом сверху</h1>

            <div class="artInfo">
                Автор: <span>Александр Головко</span>  Дата публикации: 04.02.2012            </div>
            <p><p>Достаточно часто встречается ситуация, когда какой-либо, по задумке дизайнера, очень важный блок (например, корзина товаров, меню или просто информационная панелька) должен, независимо от прокрутки экрана, все время находится на виду.</p>
<p>Сама по себе задача трудностей не представляет. В конце концов именно для этих целей служит <a href="http://www.xiper.net/manuals/css/properties/position.html" title="почитать о CSS-свойстве position">position</a>: fixed.</p>
<p>Немного сложнее обстоит дело, если нужно организовать у такого блока переменный отступ. Пусть, например, фиксированный блок располагается внизу шапки (т.е. с каким-либо отступом сверху), но после прокрутки экрана &laquo;приклеивается&raquo; к его верху. Логика тут железная &mdash; шапка уехала вверх и отступ теперь совершенно не нужен.</p>
<p>На помощь приходит Javascript.</p>

<h2>Задача</h2>
<p>Реализовать фиксированный блок с плавающим верхним отступом.</p>
<h2>Решение</h2>
<p>Для примера располагаю блок в шапке:</p>
<div class="codeExample codeHTML">
<pre class="brush: xml">
&lt;div class=&quot;header&quot;&gt;
	&lt;div id=&quot;fixedBox&quot;&gt;
		Какой-то очень важный блок, который все время нужно видеть.
	&lt;/div&gt;
&lt;/div&gt;
</pre>
</div>
<p>В CSS задаем оформление и позиционирование:</p>

<div class="codeExample codeCSS">
<pre class="brush: css">
.header {
	height: 200px; /* высота шапки */
}
#fixedBox {
	/* размеры фиксированного блока */
	height: 30px;
	width: 900px;
	position: fixed;
	/* отступ сверху когда шапка видна полностью */
	margin-top: 170px;
}
</pre>
</div>
<p>Скрипт для пересчета отступа на основе jQuery (естественно, не забудь подключить и саму библиотеку):</p>

<div class="codeExample codeJavascript">
<pre class="brush: css">
&lt;script type="text/javascript"&gt;
jQuery(document).ready(function(){
	/* функция кроссбраузерного определения отступа от верха документа к текущей позиции скроллера прокрутки */
	function getScrollTop() {
			   var scrOfY = 0;
			   if( typeof( window.pageYOffset ) == "number" ) {
					   //Netscape compliant
					   scrOfY = window.pageYOffset;
			   } else if( document.body
			   && ( document.body.scrollLeft
			   || document.body.scrollTop ) ) {
					   //DOM compliant
					   scrOfY = document.body.scrollTop;
			   } else if( document.documentElement
			   && ( document.documentElement.scrollLeft
				|| document.documentElement.scrollTop ) ) {
					   //IE6 Strict
					   scrOfY = document.documentElement.scrollTop;
			   }
			   return scrOfY;
	}
	/* пересчитываем отступ при прокрутке экрана */
	jQuery(window).scroll(function() {
		fixPaneRefresh();
	});
	
	function fixPaneRefresh(){
		if (jQuery("#fixedBox").length) {
			var top  = getScrollTop();
			if (top < 170) jQuery("#fixedBox").css("margin-top",170-top+"px"); /* 170 - это наш отступ */
			else jQuery("#fixedBox").css("margin-top","0");
		}
	}

});
&lt;/script&gt;
</pre>
</div>


<p><a href="http://www.xiper.net/examples/js-plugins/position/fixedbox.html" rel="nofollow">Демо пример</a>.</p>

<p>Проверено в:</p>
<ul class="browserCheck">
<li>IE 7-9</li>
<li class="ff">Firefox 9</li>
<li class="opera">Opera 11</li>
<li class="safari">Safari</li>
<li class="chrome">Chrome</li>
</ul>


<h2>По теме</h2>
<ul>
<li><a href="http://www.xiper.net/collect/js-plugins/position-and-size/position-with-scroll.html">Позиционирование блока по центру с учетом скрола</a></li>
<li><a href="http://www.xiper.net/collect/html-and-css-tricks/glyuki-brauzerov/ie6/emulation-fixed-in-ie6.html">position:fixed для ИЕ6</a></li>
</ul>

<h2>Материал</h2>
<ul>
<li><a href="http://awesome-design.com/stati/javascript/fiksirovannoe-vertikalnoe-menyu.html">Awesome design:: Фиксированное вертикальное меню </a></li>
</ul></p>
        </div>
    </div>
    <div class="sideBar">
        <div class="htmlAndCSSTricksSubMenu">
            <ul>

                <li><span>AJAX</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/ajax/ajax-request">AJAX запрос</a></li><li><a href="http://xiper.net/collect/js-plugins/ajax/ajax-abort">Отмена AJAX-запроса</a></li></ul></li><li><span>HTML5 и CSS3</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/html5-and-css3/css3-pie">CSS3 PIE</a></li><li><a href="http://xiper.net/collect/js-plugins/html5-and-css3/explorer-canvas">Explorer Canvas</a></li><li><a href="http://xiper.net/collect/js-plugins/html5-and-css3/html5shiv">html5shiv &mdash; HTML5 теги для IE</a></li><li><a href="http://xiper.net/collect/js-plugins/html5-and-css3/ie-dinamic-insert-canvas">IE и динамическая вставка canvas</a></li><li><a href="http://xiper.net/collect/js-plugins/html5-and-css3/jquery-placeholder">jQuery-Placeholder &mdash; замещающийся текст</a></li><li><a href="http://xiper.net/collect/js-plugins/html5-and-css3/modernizr">Modernizr &mdash; HTML5 и CSS3 уже сегодня</a></li><li><a href="http://xiper.net/collect/js-plugins/html5-and-css3/dynamicpie">PIE для скрытых или динамических элементов</a></li></ul></li><li><span>Галереи и слайдеры</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/gallery/fancybox">FancyBox &mdash; галерея и модальное окно</a></li><li><a href="http://xiper.net/collect/js-plugins/gallery/highslide">Highslide JS &#8212; фотогалерея</a></li><li><a href="http://xiper.net/collect/js-plugins/gallery/jcarousellite">JCarouselLite. Прокрутка слайдов</a></li><li><a href="http://xiper.net/collect/js-plugins/gallery/spacegallery">Spacegallery &mdash; эффектная 3D галерея</a></li><li><a href="http://xiper.net/collect/js-plugins/gallery/jquery-colorbox">Галерея jQuery ColorBox</a></li><li><a href="http://xiper.net/collect/js-plugins/gallery/jquery-lightbox">Галерея jQuery lightBox</a></li><li><a href="http://xiper.net/collect/js-plugins/gallery/flsgallery">Галерея с неравномерным шагом</a></li><li><a href="http://xiper.net/collect/js-plugins/gallery/tinycircleslider">Забавная галерея Tiny Circleslider</a></li><li><a href="http://xiper.net/collect/js-plugins/gallery/tinycarousel">Листалка слайдов Tiny Carousel</a></li><li><a href="http://xiper.net/collect/js-plugins/gallery/coin-slider">Слайдер Coin Slider</a></li><li><a href="http://xiper.net/collect/js-plugins/gallery/cycle">Слайдер jQuery Cycle</a></li></ul></li><li><span>Интерфейс</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/ui/html5-drag-n-drop-file-upload">Drag-n-Drop загрузка файлов</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/jquery-ui-slider">jQuery UI Slider &mdash; ползунок выбора диапазона</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/jquery-ui-slider-add">jQuery UI Slider &mdash; усложненный вариант выбора диапазона</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/jscrollpane2">JScrollPane 2 &mdash; настраиваемый скроллбар</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/jscrollpane">JScrollPane. Делаем красивый скроллинг</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/masked-input-plugin">Masked Input Plugin</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/tinyscrollbar">Tiny Scrollbar &mdash; настраиваемый скроллбар</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/resizable">UI resizable &mdash; изменение размеров</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/zeroclipboard">ZeroClipboard &mdash; копируем в буфер</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/zoomy">Zoomy &mdash; лупа на jQuery</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/groupinputs">Группируем инпуты</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/map-raphael">Интерактивная SVG-карта на Raphael</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/cloud-zoom">Плагин jQuery cloud-zoom (лупа)</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/drag-n-drop">Плагин jQuery drag из набора Interface</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/easydrag">Плагин jQuery EasyDrag &mdash; проще не бывает</a></li><li><a href="http://xiper.net/collect/js-plugins/ui/closepopup">Скрываем окно по клику снаружи</a></li></ul></li><li><span>Контент</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/content/multi-column">CSS Multi Column</a></li></ul></li><li><span>Определение браузера и его возможностей</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/browser-detect/browser-name-and-version">Определение браузера и его версии</a></li></ul></li><li><span>Позиция и размеры</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/position-and-size/position-with-scroll">Позиционирование блока по центру с учетом скрола</a></li><li><strong>Фиксированный блок с изменяющимся отступом сверху</strong></li></ul></li><li><span>Разгоняем сайт</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/overclock-site/keshirovaniye-ajax-zaprosov">Кэширование Ajax-запросов</a></li><li><a href="http://xiper.net/collect/js-plugins/overclock-site/optimizacia-dom-animacii">Оптимизация DOM анимации</a></li><li><a href="http://xiper.net/collect/js-plugins/overclock-site/optimization-jquery-animate">Оптимизация jQuery.animate</a></li><li><a href="http://xiper.net/collect/js-plugins/overclock-site/why-jquery-is-better-to-download-from-google">Почему jQuery лучше грузить с Google</a></li><li><a href="http://xiper.net/collect/js-plugins/overclock-site/programm-animation">Программная анимация</a></li></ul></li><li><span>Формы</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/forms/textarea-autoresize">autoResize: textarea подстраивается под высоту текста</a></li><li><a href="http://xiper.net/collect/js-plugins/forms/cutext">cuText &#8212; нестандартный textarea на JQuery</a></li><li><a href="http://xiper.net/collect/js-plugins/forms/filtering-and-data-validation-fields">Фильтрация и проверка данных полей</a></li></ul></li><li><span>Эффекты</span><ul style='display: none;'><li><span>Изображения</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/effects/img/blur">Блюр</a></li></ul></li></ul></li><li><span>Юзабилити</span><ul style='display: none;'><li><a href="http://xiper.net/collect/js-plugins/usability/tabs-and-button-back">Вкладки и кнопка Back</a></li><li><a href="http://xiper.net/collect/js-plugins/usability/delay-on-hover">Выпадающее окошко с задержкой</a></li><li><a href="http://xiper.net/collect/js-plugins/usability/diagonal-drop-down-menu">Диагональ к выпавшему меню</a></li></ul></li>            </ul>
        </div>
            </div>


<!--/side bar-->
</div>
<!--footer-->
<div class="footer" id="[*id*]">
	<div class="advertisementPanel">

	</div>

	<div class="footerCopy">
		&copy; 2009-2017 xiper.net<br/>
		Много о HTML, CSS, Javascript.<br>
		Опасно для мозга. Можно стать умным.
	</div>

	<div class="footerSection">
		<h2 title="информация о проекте">Инфо</h2>
		<ul id="menu-footer-1" class="main-navigation"><li id="menu-item-1731" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1731"><a href="http://xiper.net/about">О проекте</a></li>
<li id="menu-item-1728" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1728"><a href="http://xiper.net/about-material">О материалах</a></li>
<li id="menu-item-1730" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1730"><a href="http://xiper.net/adv">Реклама</a></li>
<li id="menu-item-1729" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1729"><a href="http://xiper.net/feedback">Письмо в редакцию</a></li>
</ul>	</div>
	<div class="footerNavSection">
		<h2 title="основные разделы сайта">Разделы</h2>
		<ul id="menu-footer-2" class="main-navigation"><li id="menu-item-1732" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-1732"><a href="http://xiper.net/">Главная</a></li>
<li id="menu-item-1733" class="menu-item menu-item-type-taxonomy menu-item-object-category current-category-ancestor menu-item-1733"><a href="http://xiper.net/collect">Собираем</a></li>
<li id="menu-item-1734" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1734"><a href="http://xiper.net/watch">Следим</a></li>
<li id="menu-item-1735" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1735"><a href="http://xiper.net/uncensored">Без цензуры</a></li>
<li id="menu-item-1736" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1736"><a href="http://xiper.net/learn">Учимся</a></li>
<li id="menu-item-1737" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1737"><a href="http://xiper.net/manuals">Справочники</a></li>
</ul>	</div>

</div>
<!--/footer-->
